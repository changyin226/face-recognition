(function(t){function e(e){for(var n,r,o=e[0],l=e[1],u=e[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/face-recognition/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"21bb":function(t,e,a){"use strict";a("2dad")},"2dad":function(t,e,a){},"375b":function(t,e,a){t.exports=a.p+"img/brain.14deb58b.svg"},"4d12":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=a("98c9"),s=a("bc3a"),r=a.n(s),o=a("2106"),l=a.n(o),u=a("ee98"),c=a.n(u),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("loading",{attrs:{active:t.isLoading,"lock-scroll":!0,opacity:.6,"background-color":"#000",color:"#f713ff"},on:{"update:active":function(e){t.isLoading=e}}}),a("notifications",{attrs:{position:"top left"}}),a("navigation"),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1),a("vue-particles",{attrs:{color:"#fff","particle-opacity":1,"particles-number":100,"particle-size":1,"lines-color":"#fff","line-opacity":.8,"hover-effect":!1,"click-effect":!1}})],1)},d=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navigation-component tr pv3"},["Home"===t.routeName?a("div",[a("a",{staticClass:"dib f3 black underline pa3 pointer tracked"},[a("span",{on:{click:t.signOut}},[t._v("登出")])])]):a("div",[a("router-link",{staticClass:"dib f3 black underline pa3 pointer tracked",attrs:{to:{name:"SignIn"}}},[t._v(" 登入 ")]),a("router-link",{staticClass:"dib f3 black underline pa3 pointer tracked",attrs:{to:{name:"Register"}}},[t._v(" 註冊 ")])],1)])},f=[],b=(a("b0c0"),{computed:{routeName:function(){return this.$route.name}},methods:{signOut:function(){var t=this;this.$bus.$emit("update:loading",!0);var e=localStorage.getItem("token"),a="https://quiet-sea-49749.herokuapp.com/signout";this.$http.post(a,null,{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){localStorage.removeItem("token"),t.$router.push({name:"SignIn"}),t.$bus.$emit("update:loading",!1),t.$notify({type:"success",text:e.data})})).catch((function(e){t.$bus.$emit("update:loading",!1),t.$notify({type:"error",text:e.response.data})}))}}}),h=b,g=(a("a4e1"),a("2877")),v=Object(g["a"])(h,m,f,!1,null,null,null),w=v.exports,k=a("9062"),y=a.n(k),$=(a("e40d"),{components:{Navigation:w,Loading:y.a},data:function(){return{isLoading:!1}},mounted:function(){var t=this;this.$bus.$on("update:loading",(function(e){t.isLoading=e}))}}),C=$,_=(a("5c0b"),Object(g["a"])(C,p,d,!1,null,null,null)),x=_.exports,S=a("8c4f"),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.user.name?a("div",{staticClass:"home-page"},[t._m(0),a("h1",{staticClass:"white f3"},[t._v(" "+t._s(t.user.name)+", 您目前掃描得照片總數為... ")]),a("p",{staticClass:"white f1"},[t._v(" "+t._s(t.user.entries)+" ")]),a("div",[a("p",{staticClass:"f3 mv4"},[t._v(" 提供圖片網址，Magic Brain 將會為您偵測出現在圖片上的臉。 ")]),a("div",{staticClass:"form pa4 br3 shadow-5 center flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.imgUrl,expression:"imgUrl"}],staticClass:"f4 pa2 w-70",attrs:{type:"text"},domProps:{value:t.imgUrl},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.urlSubmit.apply(null,arguments)},input:[function(e){e.target.composing||(t.imgUrl=e.target.value)},t.imgUrlChange]}}),a("div",{staticClass:"w-30",class:{"not-allowed":t.isNotAllowSubmit}},[a("button",{staticClass:"f4 w-100 h-100 link ph3 pv2 white bg-light-purple pointer bn",attrs:{type:"button"},on:{click:t.urlSubmit}},[t._v(" 偵測 ")])])])]),a("div",{staticClass:"flex justify-center"},[a("div",{staticClass:"ma4 relative"},[a("transition",{attrs:{name:"fade"}},[t.imgUrl?a("img",{ref:"image",attrs:{src:t.imgUrl,alt:""},on:{load:function(e){t.isNotAllowSubmit=!1}}}):t._e()]),t._l(t.boxes,(function(t,e){return a("Box",{key:e,attrs:{box:t}})}))],2)])]):t._e()},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"brain-img br2 shadow-2 ma4 mt0"},[n("img",{attrs:{src:a("375b"),alt:"logo"}})])}],E=(a("99af"),a("d3b7"),a("ddb0"),a("a9e3"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-component",style:{top:t.box.topRow+"px",right:t.box.rightCol+"px",bottom:t.box.bottomRow+"px",left:t.box.leftCol+"px"}})}),I=[],j={props:{box:{type:Object,required:!0}}},A=j,P=(a("ed52"),Object(g["a"])(A,E,I,!1,null,null,null)),U=P.exports,z={components:{Box:U},data:function(){return{user:{},imgUrl:"",isNotAllowSubmit:!0,boxes:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.getUser()}))},methods:{getUser:function(){var t=this;this.$bus.$emit("update:loading",!0);var e=localStorage.getItem("token");if(e){var a="https://quiet-sea-49749.herokuapp.com/signin";this.$http.post(a,null,{headers:{authorization:"Bearer ".concat(e)}}).then((function(a){var n="https://quiet-sea-49749.herokuapp.com/profile/".concat(a.data);return t.$http.get(n,{headers:{authorization:"Bearer ".concat(e)}})})).then((function(e){t.user=e.data.user,t.$bus.$emit("update:loading",!1),t.$notify({type:"success",text:"".concat(e.data.user.name," ").concat(e.data.message)})})).catch((function(e){localStorage.removeItem("token"),t.$router.push({name:"SignIn"}),t.$bus.$emit("update:loading",!1),t.$notify({type:"error",text:e.response.data})}))}else this.$router.push({name:"SignIn"}),this.$bus.$emit("update:loading",!1),this.$notify({type:"error",text:"請先登入"})},urlSubmit:function(){var t=this;if(!this.isNotAllowSubmit){this.$bus.$emit("update:loading",!0);var e=localStorage.getItem("token");this.$http.post("https://quiet-sea-49749.herokuapp.com/imageurl",{input:this.imgUrl},{headers:{authorization:"Bearer ".concat(e)}}).then((function(a){t.displayFaceBoxes(a.data.outputs[0].data.regions);var n=t.user.id;return t.$http.put("https://quiet-sea-49749.herokuapp.com/image",{id:n},{headers:{authorization:"Bearer ".concat(e)}})})).then((function(e){t.user.entries=e.data,t.$bus.$emit("update:loading",!1)})).catch((function(e){401===e.response.status&&(localStorage.removeItem("token"),t.$router.push({name:"SignIn"})),t.$bus.$emit("update:loading",!1),t.$notify({type:"error",text:e.response.data})}))}},imgUrlChange:function(){this.boxes=[],this.isNotAllowSubmit=!0},displayFaceBoxes:function(t){var e=this.$refs.image,a=Number(e.width),n=Number(e.height),i=t.map((function(t){var e=t.region_info.bounding_box;return{leftCol:e.left_col*a,topRow:e.top_row*n,rightCol:a-e.right_col*a,bottomRow:n-e.bottom_row*n}}));this.boxes=i}}},B=z,R=(a("21bb"),Object(g["a"])(B,N,O,!1,null,null,null)),V=R.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-in-page pa4 black-80 br3 ba b--black-10 w-100 mw6 center shadow-5"},[a("form",{staticClass:"measure center",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signInSubmit.apply(null,arguments)},submit:function(t){t.preventDefault()}}},[a("fieldset",{staticClass:"ba b--transparent ph0 mh0",attrs:{id:"sign_up"}},[a("legend",{staticClass:"f1 fw6 ph0 mh0 tracked"},[t._v(" 登入 ")]),a("div",{staticClass:"mt3"},[a("label",{staticClass:"db fw6 lh-copy f5 mb1",attrs:{for:"email"}},[t._v("信箱")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],staticClass:"b pa2 input-reset ba b--black bg-transparent hover-bg-black hover-white w-100",attrs:{id:"email",type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"mv3"},[a("label",{staticClass:"db fw6 lh-copy f5 mb1",attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],staticClass:"b pa2 input-reset ba b--black bg-transparent hover-bg-black hover-white w-100",attrs:{id:"password",type:"password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"dib",class:{"not-allowed":t.isNotAllowSubmit}},[a("button",{staticClass:"b ph3 pv2 ba b--black bg-transparent pointer f5",attrs:{type:"button"},on:{click:t.signInSubmit}},[t._v(" 登入 ")])])])])},Z=[],F={data:function(){return{email:"",password:""}},computed:{isNotAllowSubmit:function(){return!this.email||!this.password}},created:function(){var t=localStorage.getItem("token");t&&this.$router.push({name:"Home"})},methods:{signInSubmit:function(){var t=this;if(!this.isNotAllowSubmit){this.$bus.$emit("update:loading",!0);var e=this.email,a=this.password,n="https://quiet-sea-49749.herokuapp.com/signin";this.$http.post(n,{email:e,password:a}).then((function(e){localStorage.setItem("token",e.data.token),t.$router.push({name:"Home"})})).catch((function(e){Object.assign(t.$data,t.$options.data.call(t)),t.$bus.$emit("update:loading",!1),t.$notify({type:"error",text:e.response.data})}))}}}},H=F,L=(a("bff1"),Object(g["a"])(H,q,Z,!1,null,null,null)),M=L.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-page pa4 black-80 br3 ba b--black-10 w-100 mw6 center shadow-5"},[a("form",{staticClass:"measure center",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.registerSubmit.apply(null,arguments)},submit:function(t){t.preventDefault()}}},[a("fieldset",{staticClass:"ba b--transparent ph0 mh0",attrs:{id:"sign_up"}},[a("legend",{staticClass:"f1 fw6 ph0 mh0 tracked"},[t._v(" 註冊 ")]),a("div",{staticClass:"mt3"},[a("label",{staticClass:"db fw6 lh-copy f5 mb1",attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"b pa2 mb2\n            input-reset ba b--black bg-transparent hover-bg-black hover-white w-100",attrs:{id:"name",type:"text",name:"name",onChange:"{this.onNameChange}"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isValidName?a("small",{key:"nameSuccess",staticClass:"db b f6 tl dark-green"},[t._v("*有效的姓名")]):a("small",{key:"nameFalse",staticClass:"db f6 tl dark-red"},[t._v("*必須輸入姓名且不能含標點符號")])])],1),a("div",{staticClass:"mt3"},[a("label",{staticClass:"db fw6 lh-copy f5 mb1",attrs:{for:"email"}},[t._v("信箱")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],staticClass:"b pa2 mb2\n            input-reset ba b--black bg-transparent hover-bg-black hover-white w-100",attrs:{id:"email",type:"email",name:"email",onChange:"{this.onEmailChange}"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isValidEmail?a("small",{key:"emailSuccess",staticClass:"db b f6 tl dark-green"},[t._v("*有效的Email格式")]):a("small",{key:"emailFalse",staticClass:"db f6 tl dark-red"},[t._v("*必須輸入有效Email格式")])])],1),a("div",{staticClass:"mv3"},[a("label",{staticClass:"db fw6 lh-copy f5 mb1",attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],staticClass:"b pa2 mb2\n            input-reset ba b--black bg-transparent hover-bg-black hover-white w-100",attrs:{id:"password",type:"password",name:"password",onChange:"{this.onPasswordChange}"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isValidPassword?a("small",{key:"passwordSuccess",staticClass:"db b f6 tl dark-green"},[t._v("*有效的密碼")]):a("small",{key:"passwordFalse",staticClass:"db f6 tl dark-red db"},[t._v("*必須為字母加數字且長度不小於8")])])],1)]),a("div",{staticClass:"dib",class:{"not-allowed":t.isNotAllowSubmit}},[a("button",{staticClass:"b ph3 pv2 ba b--black bg-transparent pointer f5",attrs:{type:"button"},on:{click:t.registerSubmit}},[t._v(" 註冊 ")])])])])},D=[],J=(a("4d63"),a("ac1f"),a("25f0"),{data:function(){return{name:"",email:"",password:""}},computed:{isNotAllowSubmit:function(){return!(this.isValidName&&this.isValidEmail&&this.isValidPassword)},isValidName:function(){var t=this.name,e=new RegExp(/^[0-9A-Za-z]+$/);return e.test(t)},isValidEmail:function(){var t=this.email,e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;return e.test(t)},isValidPassword:function(){var t=this.password,e=new RegExp(/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/),a=new RegExp(/^[0-9A-Za-z]+$/);return t.length>=8&&e.test(t)&&a.test(t)}},methods:{registerSubmit:function(){var t=this;if(!this.isNotAllowSubmit){this.$bus.$emit("update:loading",!0);var e=this.name,a=this.email,n=this.password,i="https://quiet-sea-49749.herokuapp.com/register";this.$http.post(i,{name:e,email:a,password:n}).then((function(e){localStorage.setItem("token",e.data.token),t.$router.push({name:"Home"})})).catch((function(e){"發生錯誤，請再登入一次"===e?(t.$router.push({name:"SignIn"}),t.$notify({type:"error",text:e})):(t.$bus.$emit("update:loading",!1),t.$notify({type:"error",text:e.response.data}))}))}}}}),G=J,K=(a("a894"),Object(g["a"])(G,T,D,!1,null,null,null)),Q=K.exports;n["default"].use(S["a"]);var W=[{path:"/",name:"Home",component:V},{path:"/signin",name:"SignIn",component:M},{path:"/register",name:"Register",component:Q}],X=new S["a"]({routes:W}),Y=X;n["default"].prototype.$bus=new n["default"],n["default"].use(l.a,r.a),n["default"].use(i["a"]),n["default"].use(c.a),n["default"].config.productionTip=!1,new n["default"]({router:Y,render:function(t){return t(x)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"816f":function(t,e,a){},"9c0c":function(t,e,a){},a4e1:function(t,e,a){"use strict";a("4d12")},a894:function(t,e,a){"use strict";a("db38")},bff1:function(t,e,a){"use strict";a("816f")},d5cf:function(t,e,a){},db38:function(t,e,a){},ed52:function(t,e,a){"use strict";a("d5cf")}});
//# sourceMappingURL=app.0a14d260.js.map